const questions=[{name:"What is your ideal typing style?",abbr:"Weight",responses:[{name:"Featherweight",class:"forceUltraLight",description:"typing that barely exerts any force at all"},{name:"Lightweight",class:"forceLight",description:"pressing on keys with fairly light and agile taps, using only a moderate amount of force"},{name:"Middleweight",class:"forceMed",description:"consistently using enough force to bottom out the key, but not exactly pounding on it"},{name:"Heavyweight",class:"forceHeavy",description:"firmly pushing down on keys with considerable force"},{name:"Extreme heavyweight",class:"forceUltra",description:"I want my keyboard to double as a punching bag"}]},{name:"Is noise an issue?",abbr:"Silenced",responses:[{name:"Yes",class:"noiseQuiet",description:"I want my keyboard to be as quiet as possible"},{name:"No",class:"noiseLoud",description:"I don&#8217;t care how loud my keyboard gets"}]},{name:"How would you like your keypresses to feel?",abbr:"Tactility",responses:[{name:"Linear",class:"tactilityLinear",description:"no physical feedback, smooth all the way down&mdash;ideal for gaming"},{name:"Tactile",class:"tactilityBumpy",description:"bumpy feedback that lets you know when the key has been pressed"},{name:"Clicky",class:"tactilityClicky",description:'sharp feedback, typically accompanied by an audible "click" noise'}]},{name:"What is your preferred form factor?",abbr:"Form factor",responses:[{name:"Fullsize",class:"size100",description:"includes numpad, arrow keys, and all function keys"},{name:"Tenkeyless",class:"size80",description:"includes everything except the numpad, giving your mouse more room"},{name:"60%",class:"size60",description:"ultra space-saving layout that discards both the numpad and function keys"}]},{name:"Do you need macro functionality?",abbr:"Macro functionality",responses:[{name:"Yes",class:"macrosYes",description:"I want to be able to define macros"},{name:"No",class:"macrosNo",description:"I don&#8217;t need macros"}]},{name:"Do you want LED backlighting?",abbr:"LED backlighting",responses:[{name:"Yes",class:"backlightingYes",description:"I want my keyboard to glow"},{name:"No",class:"backlightingNo",description:"I don&#8217;t care about backlighting"}]},{name:"Would you be interested in different color options?",abbr:"Show color options",responses:[{name:"Yes",class:"colorYes",description:"show me keyboards with multiple color options"},{name:"No",class:"colorNo",description:"since when were there colors other than black?"}]}];class Download{constructor(){this.keyboardurl="https://xier892.github.io/recommendation/js/data/keyboards.json",this.switchurl="https://xier892.github.io/recommendation/js/data/switches.json",this.silencerurl="https://xier892.github.io/recommendation/js/data/silencers.json"}async fetchData(){Promise.all([this.getKeyboards(),this.getSwitches(),this.getSilencers()]).catch(()=>{throw(new Error).disconnected(),setTimeout(()=>this.fetchData(),5e3)}).then(()=>{settings.completed="yes",(new Error).constructor.removeError("error-disconnected")})}getKeyboards(){return fetch(this.keyboardurl).then(e=>this.constructor.handleError(e)).then(e=>{keyboards=e})}getSwitches(){return fetch(this.switchurl).then(e=>this.constructor.handleError(e)).then(e=>{switches=e})}getSilencers(){return fetch(this.silencerurl).then(e=>this.constructor.handleError(e)).then(e=>{silencers=e})}static handleError(e){return e.ok?e.json():e.json().then(Promise.reject.bind(Promise))}}class Filter{constructor(e){this.array=e}tactility(){switch(settings.tactility){case"linear":return this.array.bumpiness<=1&&this.array.clickiness<=1;case"tactile":return this.array.bumpiness>1;case"clicky":return this.array.clickiness>=2}}force(){switch(settings.force){case"ultralight":return this.array.force<=40;case"light":return this.array.force>=40&&this.array.force<=50;case"med":return this.array.force>=50&&this.array.force<=60;case"heavy":return this.array.force>=60&&this.array.force<=70;case"ultra":return this.array.force>=70}}noise(){switch(settings.noise){case"quiet":return this.array.noise<=3;case"loud":return this.array.noise>=3}}size(){switch(settings.size){case 100:return this.array.size>=100;case 80:return this.array.size>=80&&this.array.size<100;case 60:return this.array.size<80}}macros(){switch(settings.macros){case"yes":return 1===this.array.macros;case"no":return this.array.macros>=0}}backlighting(){switch(settings.backlighting){case"yes":return this.array.backlighting>0;case"no":return 0===this.array.backlighting}}color(){switch(settings.color){case"no":return this.array.color<=1;case"yes":return this.array.color>=0}}}class Recommendation{constructor(){this.switchfilter0=switches.filter(e=>new Filter(e).tactility()).filter(e=>new Filter(e).force()).filter(e=>new Filter(e).noise()),this.switchfilter1=switches.filter(e=>new Filter(e).tactility()).filter(e=>new Filter(e).force()),this.keyfilter0=keyboards.filter(e=>new Filter(e).macros()).filter(e=>new Filter(e).backlighting()).filter(e=>new Filter(e).size()).filter(e=>new Filter(e).color()),this.keyfilter1=keyboards.filter(e=>new Filter(e).macros()).filter(e=>new Filter(e).backlighting()).filter(e=>new Filter(e).color()),this.keyfilter1a=keyboards.filter(e=>new Filter(e).macros()).filter(e=>new Filter(e).size()).filter(e=>new Filter(e).color()),this.keyfilter2=keyboards.filter(e=>new Filter(e).macros()).filter(e=>new Filter(e).backlighting()),this.keyfilter2a=keyboards.filter(e=>new Filter(e).macros()).filter(e=>new Filter(e).color()),this.keyfilter3=keyboards.filter(e=>new Filter(e).macros()),this.keyfilter4=keyboards,this.switchfilterList=[this.switchfilter0,this.switchfilter1],this.keyfilterList=[this.keyfilter0,this.keyfilter1,this.keyfilter2,this.keyfilter3,this.keyfilter4],this.keyfilterLista=[this.keyfilter0,this.keyfilter1a,this.keyfilter2a,this.keyfilter3,this.keyfilter4]}static showSilencer(e){"quiet"===settings.noise&&e.filter(e=>e.noise>3).length>0?(settings.showSilencer="yes",localStorage.setItem("showSilencer","yes")):(settings.showSilencer="no",localStorage.setItem("showSilencer","no"))}generate(){const e=this.switchfilterList.map(e=>e).filter(e=>0!==e.length);this.constructor.showSilencer(e[0]);const t=this.keyfilterList.map(e=>e).filter(e=>0!==e.length),s=e[0].map(e=>e.class).map(e=>t[0].filter(t=>t.switch===e)),i=[].concat(...s);if(0===i.length)return this.generate1();new Keyboard(e[0],i).add()}generate1(){let e,t;"yes"===settings.backlighting?(e=this.switchfilterList.filter(e=>e!==this.switchfilterList[0]).map(e=>e).filter(e=>0!==e.length),this.constructor.showSilencer(e[0]),t=this.keyfilterList.map(e=>e).filter(e=>0!==e.length)):"no"===settings.backlighting&&(e=this.switchfilterList.map(e=>e).filter(e=>0!==e.length),t=this.keyfilterLista.filter(e=>e!==this.keyfilterLista[0]).map(e=>e).filter(e=>0!==e.length));const s=e[0].map(e=>e.class).map(e=>t[0].filter(t=>t.switch===e)),i=[].concat(...s);if(0===i.length)return this.generate2();new Keyboard(e[0],i).add()}generate2(){let e,t;"yes"===settings.backlighting?(e=this.switchfilterList.filter(e=>e!==this.switchfilterList[0]).map(e=>e).filter(e=>0!==e.length),this.constructor.showSilencer(e[0]),t=this.keyfilterList.filter(e=>e!==this.keyfilterList[0]).map(e=>e).filter(e=>0!==e.length)):"no"===settings.backlighting&&(e=this.switchfilterList.filter(e=>e!==this.switchfilterList[0]).map(e=>e).filter(e=>0!==e.length),this.constructor.showSilencer(e[0]),t=this.keyfilterLista.filter(e=>e!==this.keyfilterLista[0]).map(e=>e).filter(e=>0!==e.length));const s=e[0].map(e=>e.class).map(e=>t[0].filter(t=>t.switch===e)),i=[].concat(...s);if(0===i.length)return this.generate3();new Keyboard(e[0],i).add()}generate3(){let e,t;"yes"===settings.backlighting?(e=this.switchfilterList.filter(e=>e!==this.switchfilterList[0]).map(e=>e).filter(e=>0!==e.length),this.constructor.showSilencer(e[0]),t=this.keyfilterList.filter(e=>e!==this.keyfilterList[0]&&e!==this.keyfilterList[1]).map(e=>e).filter(e=>0!==e.length)):"no"===settings.backlighting&&(e=this.switchfilterList.filter(e=>e!==this.switchfilterList[0]).map(e=>e).filter(e=>0!==e.length),this.constructor.showSilencer(e[0]),t=this.keyfilterLista.filter(e=>e!==this.keyfilterLista[0]&&e!==this.keyfilterLista[1]).map(e=>e).filter(e=>0!==e.length));const s=e[0].map(e=>e.class).map(e=>t[0].filter(t=>t.switch===e)),i=[].concat(...s);if(0===i.length)return this.generate4();new Keyboard(e[0],i).add()}generate4(){const e=this.switchfilterList.filter(e=>e!==this.switchfilterList[0]).map(e=>e).filter(e=>0!==e.length);this.constructor.showSilencer(e[0]);const t=this.keyfilterList.filter(e=>e!==this.keyfilterList[0]&&e!==this.keyfilterList[1]&&e!==this.keyfilterList[2]).map(e=>e).filter(e=>0!==e.length),s=e[0].map(e=>e.class).map(e=>t[0].filter(t=>t.switch===e)),i=[].concat(...s);if(0===i.length)return this.generate5();new Keyboard(e[0],i).add()}generate5(){const e=this.switchfilterList.filter(e=>e!==this.switchfilterList[0]).map(e=>e).filter(e=>0!==e.length);this.constructor.showSilencer(e[0]);const t=this.keyfilterList.filter(e=>e===this.keyfilterList[4]).map(e=>e).filter(e=>0!==e.length),s=e[0].map(e=>e.class).map(e=>t[0].filter(t=>t.switch===e)),i=[].concat(...s);new Keyboard(e[0],i).add()}}class Button{constructor(){this.container=document.getElementById("button-container")}add(){return document.documentElement.clientWidth<=1024?this.addMobile():this.addDesktop()}addDesktop(){settings.start<questions.length?(this.container.innerHTML='<button class="desktop nextButton background-blue1" id="nextButton"><h2 class="text-gray2">&gt;</h2></button>\n      <button class="desktop prevButton border-blue1 background-white" id="prevButton"><h2 class="text-blue1">&lt;</h2></button>',setTimeout(()=>(this.enableEvents(),new Animation(this.container).fadeIn(),this.constructor.addPrev()),150)):settings.start>=questions.length&&(this.container.style.display="none")}addMobile(){settings.start<questions.length?(this.container.innerHTML='<button class="mobile nextButton background-blue1" id="nextButton">Next</button>\n      <button class="mobile prevButton background-gray2" id="prevButton">Back</button>',setTimeout(()=>(this.enableEvents(),new Animation(this.container).fadeIn(),this.constructor.addPrev()),150)):settings.start>=questions.length&&(this.container.style.display="none")}enableEvents(){document.getElementById("nextButton").addEventListener("click",()=>{document.getElementsByClassName("incomplete").length>0&&document.getElementsByClassName("faulty").length>0?new Animation(document.getElementById("module")).add("shake"):document.getElementsByClassName("incomplete").length>0?document.querySelectorAll(".incomplete header").forEach(e=>{e.classList.add("faulty","text-red")}):(settings.start<questions.length&&(settings.start++,localStorage.setItem("start",settings.start)),(new Survey).next())}),document.getElementById("prevButton").addEventListener("click",()=>{settings.start>0&&(settings.start--,localStorage.setItem("start",settings.start)),(new Survey).prev()}),document.querySelectorAll(".button-container button").forEach(e=>{e.addEventListener("click",()=>{0===settings.start?new Animation(document.getElementById("prevButton")).fadeOut():settings.start>0&&0===document.getElementsByClassName("incomplete").length&&0===document.getElementsByClassName("prevButton fadeIn").length?new Animation(document.getElementById("prevButton")).fadeIn():settings.start===questions.length&&new Animation(this.container).fadeOut()})})}static addPrev(){settings.start>0&&new Animation(document.getElementById("prevButton")).fadeIn()}}class Modal{constructor(){this.module=document.getElementById("module"),this.moduleHeight=this.module.offsetHeight,this.moduleWidth=this.module.offsetWidth,this.window=document.documentElement,this.windowHeight=document.documentElement.clientHeight,this.windowScrollTop=window.scrollY,this.windowWidth=document.documentElement.scrollWidth}open(e){const t=e.nextElementSibling;new Animation(t).zoom(),new Animation(t.children[0]).zoom(),t.style.display="flex",document.documentElement.style.overflowY="hidden",this.moduleHeight>this.windowHeight?t.style.top=`${this.windowScrollTop}px`:t.style.top=`${0-(this.windowHeight-this.moduleHeight)/2}px`,window.requestAnimationFrame(()=>{t.style.left=`${0-(this.windowWidth-this.moduleWidth)/2}px`}),t.addEventListener("click",()=>{this.close(e)}),window.addEventListener("keyup",t=>{27===t.which&&this.close(e)})}close(e){const t=e.nextElementSibling;new Animation(t).zoom2(),this.window.style.overflowY=""}}class Module{constructor(){this.box=document.getElementById("module"),this.content=document.getElementById("module-content")}get html(){return this.content}get container(){return this.box}}class Animation{constructor(e){this.el=e,this.display=window.getComputedStyle(this.el,null).getPropertyValue("display"),this.animations=["slideToLeft","slideToRight","slideFromLeft","slideFromRight","slideFromTop","slideToTop","slideToBottom","slideUp","slideDown","fadeIn","fadeOut","shake","zoom","zoom2"]}add(e){this.el.classList.remove(...this.animations),window.requestAnimationFrame(()=>this.el.classList.add(e))}slideToLeft(){this.add("slideToLeft"),setTimeout(()=>{this.el.style.opacity="0"},150)}slideToRight(){this.add("slideToRight"),setTimeout(()=>{this.el.style.opacity="0"},150)}slideFromLeft(){this.el.style.opacity="0",this.add("slideFromLeft"),"none"===this.display&&(this.el.style.display="block"),setTimeout(()=>{this.el.style.opacity="1"},600)}slideFromRight(){this.el.style.opacity="0","none"===this.display&&(this.el.style.display="block"),this.add("slideFromRight"),setTimeout(()=>{this.el.style.opacity="1"},600)}fadeIn(){this.add("fadeIn"),"none"===this.display&&(this.el.style.display="block")}fadeOut(){this.add("fadeOut"),setTimeout(()=>{this.el.style.display="none"},350)}slideUp(){this.el.style.overflowY="hidden",window.requestAnimationFrame(()=>{this.add("slideUp"),setTimeout(()=>{this.el.style.display="none",this.el.style.overflowY=""},200)})}slideDown(){this.el.style.overflowY="hidden",this.el.style.maxHeight="0",window.requestAnimationFrame(()=>{this.add("slideDown"),"none"===this.display&&(this.el.style.display="block"),setTimeout(()=>{this.el.style.overflowY="",this.el.style.maxHeight=""},200)})}slideFromTop(){this.el.style.opacity="0",this.add("slideFromTop"),setTimeout(()=>{this.el.style.opacity="1"},600)}slideToTop(){this.add("slideToTop"),setTimeout(()=>{this.el.style.display="none"},300)}slideToBottom(){this.add("slideToBottom"),setTimeout(()=>{this.el.style.display="none"},300)}zoom(){this.el.style.transform="scale(0)",this.add("zoom"),setTimeout(()=>{this.el.style.transform=""},250)}zoom2(){this.add("zoom2"),setTimeout(()=>{this.el.style.display="none"},250)}}class Checker{check(){switch(settings.start){case 0:return this.constructor.checkForce();case 1:return this.constructor.checkNoise();case 2:return this.constructor.checkTactility();case 3:return this.constructor.checkSize();case 4:return this.constructor.checkMacros();case 5:return this.constructor.checkBacklighting();case 6:return this.constructor.checkColor();case 7:(async()=>{await this.constructor.toggleClicky(),this.constructor.checkForce(),this.constructor.checkNoise(),this.constructor.checkTactility(),this.constructor.checkSize(),this.constructor.checkMacros(),this.constructor.checkBacklighting(),this.constructor.checkColor()})()}}updateLocalStorage(){return this.constructor.checkSettings()}static toggleClicky(){document.getElementsByClassName("forceUltraLight selected").length>0||document.getElementsByClassName("noiseQuiet selected").length>0?new Choice(document.getElementById("tactilityClicky")).disable():new Choice(document.getElementById("tactilityClicky")).enable()}static checkForce(){switch(!0){case document.getElementsByClassName("forceUltraLight selected").length>0:settings.force="ultralight";break;case document.getElementsByClassName("forceLight selected").length>0:settings.force="light";break;case document.getElementsByClassName("forceMed selected").length>0:settings.force="med";break;case document.getElementsByClassName("forceHeavy selected").length>0:settings.force="heavy";break;case document.getElementsByClassName("forceUltra selected").length>0:settings.force="ultra"}}static checkNoise(){switch(!0){case document.getElementsByClassName("noiseQuiet selected").length>0:settings.noise="quiet";break;case document.getElementsByClassName("noiseLoud selected").length>0:settings.noise="loud"}}static checkTactility(){switch(!0){case document.getElementsByClassName("tactilityLinear selected").length>0:settings.tactility="linear";break;case document.getElementsByClassName("tactilityBumpy selected").length>0:settings.tactility="tactile";break;case document.getElementsByClassName("tactilityClicky selected").length>0:settings.tactility="clicky"}}static checkSize(){switch(!0){case document.getElementsByClassName("size100 selected").length>0:settings.size=100;break;case document.getElementsByClassName("size80 selected").length>0:settings.size=80;break;case document.getElementsByClassName("size60 selected").length>0:settings.size=60}}static checkMacros(){switch(!0){case document.getElementsByClassName("macrosYes selected").length>0:settings.macros="yes";break;case document.getElementsByClassName("macrosNo selected").length>0:settings.macros="no"}}static checkBacklighting(){switch(!0){case document.getElementsByClassName("backlightingYes selected").length>0:settings.backlighting="yes";break;case document.getElementsByClassName("backlightingNo selected").length>0:settings.backlighting="no"}}static checkColor(){switch(!0){case document.getElementsByClassName("colorYes selected").length>0:settings.color="yes";break;case document.getElementsByClassName("colorNo selected").length>0:settings.color="no"}}static checkSettings(){localStorage.setItem("force",settings.force),localStorage.setItem("noise",settings.noise),localStorage.setItem("tactility",settings.tactility),localStorage.setItem("size",settings.size),localStorage.setItem("macros",settings.macros),localStorage.setItem("backlighting",settings.backlighting),localStorage.setItem("color",settings.color)}}let keyboards,switches,silencers;const settings={tactility:"",force:"",noise:"",size:"",macros:"",backlighting:"",color:"",showSilencer:"",start:0,completed:"no"},loadFromStorage=async()=>{settings.tactility=localStorage.getItem("tactility"),settings.force=localStorage.getItem("force"),settings.noise=localStorage.getItem("noise"),settings.size=Number(localStorage.getItem("size")),settings.macros=localStorage.getItem("macros"),settings.backlighting=localStorage.getItem("backlighting"),settings.color=localStorage.getItem("color"),settings.showSilencer=localStorage.getItem("showSilencer"),null!==localStorage.getItem("start")&&(settings.start=Number(localStorage.getItem("start")))};(new Download).fetchData(),(async()=>{await loadFromStorage(),(new Survey).next(),(new Button).add()})();class Choice{constructor(e){this.el=e,this.siblings=Array.from(this.el.parentNode.children).filter(e=>e!==this.el),this.classes=["selected","background-blue1","faulty","background-red","text-red"]}add(){this.siblings.forEach(e=>{e.classList.remove(...this.classes)}),this.el.classList.add("selected","background-blue1"),this.el.parentNode.classList.remove(...this.classes,"incomplete"),(new Checker).check()}disable(){new Animation(this.el).slideUp(),this.el.classList.contains("selected")&&(this.el.classList.remove("selected","background-blue1"),this.el.parentNode.classList.add("incomplete"))}enable(){"none"===window.getComputedStyle(this.el,null).getPropertyValue("display")&&(new Animation(this.el).slideDown(),this.el.classList.contains("selected")&&(this.el.classList.remove("selected","background-blue1"),this.el.parentNode.classList.add("incomplete")))}}class Error{disconnected(){if(this.constructor.clearAll(),!document.body.contains(document.getElementById("error-disconnected")))return document.getElementById("main").innerHTML+='<header class="error-container background-red" id="error-disconnected">\n        <h4>Connection lost</h4>\n      </header>',this.constructor.displayError("error-disconnected")}static displayError(e){document.getElementById(e).style.top=window.scrollY,new Animation(document.getElementById(e)).slideFromTop()}static removeError(e){document.body.contains(document.getElementById(e))&&(new Animation(document.getElementById(e)).slideToTop(),setTimeout(()=>{document.getElementById(e).remove()},600))}static clearAll(){document.getElementsByClassName(".error-container").length>0&&document.querySelectorAll(".error-container").forEach(e=>{e.remove()})}}class EditMenu extends Modal{open(){if(1===document.querySelectorAll("#resubmit.modal").length)return this.selectAll();document.querySelectorAll("#resubmit.modal").length>1&&document.querySelectorAll("#resubmit.modal").forEach(e=>e.remove()),document.getElementById("main").innerHTML+='<div class="modal background-white" id="resubmit">\n      <section class="container-wrapper">\n        <section class="container-content" id="edit-questions">\n        </section>\n      </section>\n      <div class="closeButton closeButtonTop" id="closeButtonTop"></div>\n    </div>';for(let e=0;e<questions.length;e++){document.getElementById("edit-questions").innerHTML+=`<section class="half section">\n        <ul class="multipleChoice incomplete">\n          <header><h3>${questions[e].abbr}</h3></header>\n        </ul>\n      </section>`;for(let t=0;t<questions[e].responses.length;t++)document.querySelectorAll(".multipleChoice")[e].innerHTML+=`<li class="text-gray3 ${questions[e].responses[t].class}" id="${questions[e].responses[t].class}"><a><section><p>${questions[e].responses[t].name}</p></section></a></li>`}return document.getElementById("edit-questions").innerHTML+='<section class="button-container-submit">\n      <button class="submitButton background-gray3" id="submitButton">Submit</button>\n      <button class="closeButton closeButtonBottom background-gray2" id="closeButtonBottom">Cancel</button>\n    </section>',this.selectAll()}reveal(){const e=document.getElementById("resubmit");return new Animation(document.getElementById("module")).fadeOut(),new Animation(e).slideFromTop(),e.style.display="flex",e.style.top=`${Math.max(0,(document.documentElement.clientHeight-e.offsetHeight)/2+window.scrollY)}px`,e.style.left=`${Math.max(0,(document.documentElement.clientWidth-e.offsetWidth)/2+window.scrollX)}px`,e.scrollTop=0,document.documentElement.style.overflowY="hidden",this.enableEvents()}enableEvents(){(new Survey).constructor.enableChoices(),document.getElementById("submitButton").addEventListener("click",()=>{this.constructor.editCriteria()});for(var e=0;e<document.getElementsByClassName("closeButton").length;e++)document.getElementsByClassName("closeButton")[e].addEventListener("click",()=>{this.constructor.editDiscard()});window.addEventListener("keyup",e=>{13===e.which&&"none"!==window.getComputedStyle(document.getElementById("resubmit"),null).getPropertyValue("display")&&window.requestAnimationFrame(()=>{this.constructor.editCriteria()}),27===e.which&&"none"!==window.getComputedStyle(document.getElementById("resubmit"),null).getPropertyValue("display")&&window.requestAnimationFrame(()=>{this.constructor.editDiscard()})})}selectAll(){switch(settings.tactility){case"linear":new Choice(document.getElementById("tactilityLinear")).add();break;case"tactile":new Choice(document.getElementById("tactilityBumpy")).add();break;case"clicky":new Choice(document.getElementById("tactilityClicky")).add()}switch(settings.force){case"ultralight":new Choice(document.getElementById("forceUltraLight")).add(),new Choice(document.getElementById("tactilityClicky")).disable();break;case"light":new Choice(document.getElementById("forceLight")).add();break;case"med":new Choice(document.getElementById("forceMed")).add();break;case"heavy":new Choice(document.getElementById("forceHeavy")).add();break;case"ultra":new Choice(document.getElementById("forceUltra")).add()}switch(settings.noise){case"quiet":new Choice(document.getElementById("noiseQuiet")).add(),new Choice(document.getElementById("tactilityClicky")).disable();break;case"loud":new Choice(document.getElementById("noiseLoud")).add()}switch(settings.size){case 100:new Choice(document.getElementById("size100")).add();break;case 80:new Choice(document.getElementById("size80")).add();break;case 60:new Choice(document.getElementById("size60")).add()}switch(settings.macros){case"yes":new Choice(document.getElementById("macrosYes")).add();break;case"no":new Choice(document.getElementById("macrosNo")).add()}switch(settings.backlighting){case"yes":new Choice(document.getElementById("backlightingYes")).add();break;case"no":new Choice(document.getElementById("backlightingNo")).add()}switch(settings.color){case"yes":new Choice(document.getElementById("colorYes")).add();break;case"no":new Choice(document.getElementById("colorNo")).add()}return this.reveal()}static editCriteria(){document.getElementsByClassName("incomplete").length>0?(document.querySelectorAll(".incomplete").forEach(e=>{e.classList.add("faulty","text-red")}),document.getElementsByClassName("faulty")[0].scrollIntoView()):((new Checker).check(),(new Checker).updateLocalStorage(),document.getElementById("module").style.visibility="hidden",(new Survey).next(),document.getElementById("resubmit").style.top="",new Animation(document.getElementById("resubmit")).slideToTop(),window.requestAnimationFrame(()=>{setTimeout(()=>{new Animation(document.getElementById("module")).slideFromRight(),document.getElementById("module").style.visibility="",document.documentElement.style.overflowY=""},300)}))}static editDiscard(){loadFromStorage(),document.getElementById("module").style.visibility="hidden",document.getElementById("resubmit").style.top="",new Animation(document.getElementById("resubmit")).slideToBottom(),window.requestAnimationFrame(()=>{setTimeout(()=>{new Animation(document.getElementById("module")).fadeIn(),document.getElementById("module").style.visibility="",document.documentElement.style.overflowY=""},300),document.getElementById("editButton").addEventListener("click",()=>{(new EditMenu).open()})})}}class Keyboard extends Module{constructor(e,t){super(),this.s=e,this.k=t}add(){return super.html.innerHTML="","yes"===settings.showSilencer?this.appendSilencer():this.appendSwitch()}appendSilencer(){return super.html.innerHTML+=`<section class="container-content silencerMessage background-gray3">\n      <section class="silencer">\n        <div class="switch-listing">\n          <div class="media">\n            <div class="media-img"></div>\n          </div>\n          <div class="switch-listing-description">\n            <header><h3>${silencers.message.title}</h3></header>\n            <small class="text-gray2"><p>${silencers.message.description.split("\r\n").join("</p><p>")}</p></small>\n          </div>\n        </div>\n        <ul class="keyboard-list" id="silencer-list">\n        </ul>\n      </section>\n    </section>`,silencers.silencers.forEach(e=>{document.getElementById("silencer-list").innerHTML+=`<li class="silencer ${e.class}">\n        <div class="keyboard-identifier">\n          <div class="media">\n            <div class="media-img"></div>\n          </div>\n          <div class="image modal background-gray3-50">\n            <div class="media-img"></div>\n          </div>\n          <div class="description">\n            <a href="${e.url}" target="_blank"><p class="text-gray2">${(e=>{if("zealencio"===e.class)switch(settings.size){case 100:return e.name[0];case 80:return e.name[1];case 60:return e.name[2];default:return e.name}return e.name})(e)}</p></a>\n            <small class="text-gray2">\n              <ul class="keyboard-specs">\n                <li><b>Travel reduction:</b> ${e.distance.toFixed(1)}mm</li>\n                <li><b>Changes feeling:</b> ${e.changefeeling}</li>\n              </ul>\n              <a class="spec-toggle text-blue1"><span class="showHide">Show</span> specifications</a>\n            </small>\n          </div>\n        </div>\n        <div class="price">\n          <header><h3>$${(e=>{if("zealencio"===e.class)switch(settings.size){case 100:return e.price[0].toFixed(2);case 80:return e.price[1].toFixed(2);case 60:return e.price[2].toFixed(2);default:return e.price.toFixed(2)}return e.price.toFixed(2)})(e)}</h3></header>\n        </div>\n      </li>`}),this.appendSwitch()}appendSwitch(){return super.html.innerHTML+='<section class="container-content">\n      <section class="section">\n        <p>Here are some keyboards you might be interested in:</p>\n      </section>\n      <section class="section" id="keyboard-recommendations">\n      </section>\n      <section class="button-container-last">\n        <button class="editButton background-gray2" id="editButton">Edit</button>\n      </section>\n    </section>',this.s.forEach(e=>{document.getElementById("keyboard-recommendations").innerHTML+=`<section class="switch" id="${e.class}">\n        <div class="switch-listing">\n          <div class="media">\n            <div class="media-img"></div>\n          </div>\n          <div class="switch-listing-description">\n            <header><h3>${e.name}</h3></header>\n            <small class="text-gray3"><p>${e.description.split("\r\n").join("</p><p>")}</p></small>\n          </div>\n        </div>\n        <ul class="keyboard-list">\n        </ul>\n      </section>`}),this.appendKeyboard()}appendKeyboard(){return this.k.forEach(e=>{document.getElementById(e.switch).getElementsByClassName("keyboard-list")[0].innerHTML+=`<li class="keyboard ${e.class}">\n        <div class="keyboard-identifier">\n          <div class="media">\n            <div class="media-img"></div>\n          </div>\n          <div class="image modal background-gray3-50">\n            <div class="media-img"></div>\n          </div>\n          <div class="description">\n            <a href="${(e=>void 0!==e.url?`${e.url}`:`keyboards/${e.switch}-${e.class}`)(e)}" target="_blank"><p class="text-gray3">${e.name}</p></a>\n            <small class="text-gray3">\n              <ul class="keyboard-specs">\n                <li><b>Anti-ghosting:</b> Yes</li>\n                <li><b>Backlighting:</b> ${(e=>{switch(e.backlighting){case 0:return"No";default:return`LED (${e.LEDName})`}})(e)}</li>\n                <li><b>Color:</b> ${e.colorName}</li>\n                <li><b>Form factor:</b> ${(e=>{switch(e.size){case 100:return"Fullsize";case 80:return"Tenkeyless";default:return`${e.size}%`}})(e)}</li>\n                <li><b>Keycap material:</b> ${e.keycaps}</li>\n                <li><b>Macro support:</b> ${(e=>{switch(e.macros){case 0:return"No";case 1:return"Yes"}})(e)}</li>\n                <li><b>USB key rollover:</b> ${e.rollover}</li>\n              </ul>\n              <a class="spec-toggle text-blue1"><span class="showHide">Show</span> specifications</a>\n            </small>\n          </div>\n        </div>\n        <div class="price">\n          <header><h3>$${e.price.toFixed(2)}</h3></header>\n        </div>\n      </li>`}),document.documentElement.scrollTop=0,new Animation(super.container).slideFromRight(),this.constructor.hideChildless()}static hideChildless(){return document.querySelectorAll(".keyboard-list").forEach(e=>{0===e.children.length&&e.parentNode.remove()}),this.enableEvents()}static enableEvents(){document.querySelectorAll(".spec-toggle").forEach(e=>{e.addEventListener("click",()=>{"Show"===e.childNodes[0].innerHTML?(new Animation(e.previousElementSibling).slideDown(),window.requestAnimationFrame(()=>{e.childNodes[0].innerHTML="Hide"})):"Hide"===e.childNodes[0].innerHTML&&(new Animation(e.previousElementSibling).slideUp(),window.requestAnimationFrame(()=>{e.childNodes[0].innerHTML="Show"}))})}),document.querySelectorAll(".keyboard-identifier .media").forEach(e=>{e.addEventListener("click",()=>{(new Modal).open(e)})}),document.getElementById("editButton").addEventListener("click",()=>{(new EditMenu).open()})}}class Survey extends Module{constructor(){super(),this.i=settings.start}next(){if(settings.start>=questions.length){(new Checker).updateLocalStorage(),new Animation(super.container).slideToLeft();const e=()=>{"yes"!==settings.completed?window.requestAnimationFrame(e):setTimeout(()=>{document.documentElement.scrollTop=0,(new Recommendation).generate()},150)};e()}else new Animation(super.container).slideToLeft(),setTimeout(()=>{document.documentElement.scrollTop=0,this.appendQuestion("next")},150)}prev(){new Animation(super.container).slideToRight(),setTimeout(()=>this.appendQuestion("prev"),150)}cancel(){new Animation(super.container).slideToLeft()}appendQuestion(e){return super.html.innerHTML=`<section class="container-content">\n      <section class="section">\n        <ul class="multipleChoice incomplete">\n          <header><small class="text-blue1">Question ${this.i+1} of ${questions.length}</small><h3>${questions[this.i].name}</h3></header>\n        </ul>\n      </section>\n    </section>`,"prev"===e?this.appendResponses("prev"):this.appendResponses("next")}appendResponses(e){questions[this.i].responses.forEach((e,t)=>{("ultralight"!==settings.force&&"quiet"!==settings.noise||2!==this.i||2!==t)&&(document.getElementsByClassName("multipleChoice")[0].innerHTML+=`<li class="text-gray3 ${e.class}"><a>\n        <section>\n          <div class="media-img"></div>\n        </section>\n        <section>\n          <p>${e.name}</p><small class="text-gray1">${e.description}</small>\n        </section>\n      </a></li>`)}),this.constructor.enableChoices(),"prev"===e?new Animation(super.container).slideFromLeft():new Animation(super.container).slideFromRight()}static enableChoices(){document.querySelectorAll(".multipleChoice li").forEach(e=>{e.addEventListener("click",()=>{new Choice(e).add()})})}}